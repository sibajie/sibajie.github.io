<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"shuxun","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"./public/search.xml"};
  </script>

  <meta name="description" content="专注互联网运维技术发展">
<meta property="og:type" content="website">
<meta property="og:title" content="学无止境">
<meta property="og:url" content="http://shuxun,wang/page/33/index.html">
<meta property="og:site_name" content="学无止境">
<meta property="og:description" content="专注互联网运维技术发展">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="王殊勋">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://shuxun,wang/page/33/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>学无止境</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">学无止境</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">注互联网运维技术发展</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shuxun,wang/2018/01/31/1116/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="王殊勋">
      <meta itemprop="description" content="专注互联网运维技术发展">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学无止境">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/31/1116/" class="post-title-link" itemprop="url">centos安装并启动monit</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-01-31 22:17:00" itemprop="dateCreated datePublished" datetime="2018-01-31T22:17:00+08:00">2018-01-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-14 15:14:47" itemprop="dateModified" datetime="2021-07-14T15:14:47+08:00">2021-07-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%84%E7%B1%BB%E6%9C%8D%E5%8A%A1/" itemprop="url" rel="index"><span itemprop="name">各类服务</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>想安装monit,但是看了网上的教程没有一个能成功,根本就没有启动的那个文件.<br>后来我是去rpmsearch找了个monit的rpm包,安装后能用了.<br>关于monit的配置,本站有,烦劳大家搜索一下吧.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shuxun,wang/2018/01/25/1150/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="王殊勋">
      <meta itemprop="description" content="专注互联网运维技术发展">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学无止境">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/25/1150/" class="post-title-link" itemprop="url">centos证书登录</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-01-25 23:48:00" itemprop="dateCreated datePublished" datetime="2018-01-25T23:48:00+08:00">2018-01-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-14 15:15:27" itemprop="dateModified" datetime="2021-07-14T15:15:27+08:00">2021-07-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">操作系统</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>生成证书:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ssh-keygen -t dsa</span></span><br></pre></td></tr></table></figure>

<p>一直回车,然后:</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> ~<span class="string">/.ssh</span></span><br><span class="line">cat id_dsa.pub &gt;&gt; authorized_keys</span><br></pre></td></tr></table></figure>

<p>#2019年5月20日 修改更新:</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chmod 644 authorized_keys</span><br><span class="line"><span class="keyword">cd</span> <span class="string">..</span></span><br><span class="line">chmod 700 <span class="string">.ssh</span></span><br><span class="line"><span class="keyword">cd</span> <span class="string">..</span></span><br><span class="line">chown root<span class="function">:root</span> root</span><br></pre></td></tr></table></figure>

<p>测试:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ssh localhost</span></span><br></pre></td></tr></table></figure>

<p>可发送authorized_keys到要登陆的机器.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shuxun,wang/2018/01/11/1499/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="王殊勋">
      <meta itemprop="description" content="专注互联网运维技术发展">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学无止境">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/11/1499/" class="post-title-link" itemprop="url">解决perl warning Setting locale failed.  Cannot set LC_CTYPE to default locale</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-01-11 04:52:00" itemprop="dateCreated datePublished" datetime="2018-01-11T04:52:00+08:00">2018-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-14 15:15:30" itemprop="dateModified" datetime="2021-07-14T15:15:30+08:00">2021-07-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3/" itemprop="url" rel="index"><span itemprop="name">错误解决</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>用apt-get安装ppp 出现错误如下:</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">mail:/etc<span class="comment"># apt-get install pptp</span></span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree</span><br><span class="line">Reading <span class="keyword">state</span> information... Done</span><br><span class="line">E: Couldn&#x27;t find package pptp</span><br><span class="line">mail:/etc<span class="comment"># apt-get install ppp</span></span><br><span class="line">Reading package lists... Done</span><br><span class="line">Building dependency tree</span><br><span class="line">Reading <span class="keyword">state</span> information... Done</span><br><span class="line">The following NEW packages will be installed:</span><br><span class="line">ppp</span><br><span class="line"><span class="number">0</span> upgraded, <span class="number">1</span> newly installed, <span class="number">0</span> <span class="keyword">to</span> remove and <span class="number">281</span> not upgraded.</span><br><span class="line">Need <span class="keyword">to</span> get <span class="number">356</span>kB of archives.</span><br><span class="line">After this operation, <span class="number">1069</span>kB of additional disk space will be used.</span><br><span class="line">Get:<span class="number">1</span> http://mirror.peer1.net stable/main ppp <span class="number">2.4</span>.<span class="number">5</span>-<span class="number">4</span> [<span class="number">356</span>kB]</span><br><span class="line">Fetched <span class="number">356</span>kB <span class="keyword">in</span> <span class="number">1</span>s (<span class="number">206</span>kB/s)</span><br><span class="line">perl: warning: Setting locale failed.</span><br><span class="line">perl: warning: Please check that your locale settings:</span><br><span class="line">LANGUAGE = (unset),</span><br><span class="line">LC_ALL = (unset),</span><br><span class="line">LANG = <span class="string">&quot;en_US.UTF-8&quot;</span></span><br><span class="line">are supported and installed <span class="keyword">on</span> your system.</span><br><span class="line">perl: warning: Falling back <span class="keyword">to</span> the standard locale (<span class="string">&quot;C&quot;</span>).</span><br><span class="line">locale: Cannot <span class="built_in">set</span> LC_CTYPE <span class="keyword">to</span> <span class="keyword">default</span> locale: No such file or directory</span><br><span class="line">locale: Cannot <span class="built_in">set</span> LC_MESSAGES <span class="keyword">to</span> <span class="keyword">default</span> locale: No such file or directory</span><br><span class="line">locale: Cannot <span class="built_in">set</span> LC_ALL <span class="keyword">to</span> <span class="keyword">default</span> locale: No such file or directory</span><br><span class="line">Selecting previously deselected package ppp.</span><br></pre></td></tr></table></figure>

<p>解决办法简单,只要执行:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">dpkg-reconfigure locales</span></span><br></pre></td></tr></table></figure>

<p>然后在弹出的页面选择对应的选项就可以了.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shuxun,wang/2018/01/09/1498/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="王殊勋">
      <meta itemprop="description" content="专注互联网运维技术发展">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学无止境">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/09/1498/" class="post-title-link" itemprop="url">解决password file must not be other-accessible</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-01-09 03:15:00" itemprop="dateCreated datePublished" datetime="2018-01-09T03:15:00+08:00">2018-01-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-14 15:14:59" itemprop="dateModified" datetime="2021-07-14T15:14:59+08:00">2021-07-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3/" itemprop="url" rel="index"><span itemprop="name">错误解决</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>到这这个错误的原因有两个都是很好解决的.<br>1.Server和Client端的 server.pass 文件保持属主的600权限.<br>2.文件只保存log的密码,格式”password”,而不需要这样 “user:password”. </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shuxun,wang/2018/01/08/1084/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="王殊勋">
      <meta itemprop="description" content="专注互联网运维技术发展">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="学无止境">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/08/1084/" class="post-title-link" itemprop="url">CentOS-5安装配置ExtMail Web邮件收发系统</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-01-08 15:43:00" itemprop="dateCreated datePublished" datetime="2018-01-08T15:43:00+08:00">2018-01-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-14 15:14:59" itemprop="dateModified" datetime="2021-07-14T15:14:59+08:00">2021-07-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%84%E7%B1%BB%E6%9C%8D%E5%8A%A1/" itemprop="url" rel="index"><span itemprop="name">各类服务</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>1、制作YUM源</p>
<p>编译CentOS-Base.repo文件:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi <span class="regexp">/etc/yum</span>.repos.d/CentOS-Base.repo</span><br></pre></td></tr></table></figure>

<p>加入如下内容:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># EMOS-Base.repo</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Created by ExtMail Dev Team: http://www.extmail.org/</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># $Id$</span></span><br><span class="line"></span><br><span class="line"><span class="section">[EMOS-base]</span></span><br><span class="line"><span class="attr">name</span>=EMOS-Base</span><br><span class="line"><span class="attr">baseurl</span>=http://mirror.extmail.org/yum/emos/<span class="number">1.5</span>/os/<span class="variable">$basearch</span>/</span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">0</span></span><br><span class="line"><span class="attr">priority</span>=<span class="number">0</span></span><br><span class="line"><span class="attr">protect</span>=<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="section">[EMOS-update]</span></span><br><span class="line"><span class="attr">name</span>=EMOS-Updates</span><br><span class="line"><span class="attr">baseurl</span>=http://mirror.extmail.org/yum/emos/<span class="number">1.5</span>/updates/<span class="variable">$basearch</span>/</span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">0</span></span><br><span class="line"><span class="attr">priority</span>=<span class="number">0</span></span><br><span class="line"><span class="attr">protect</span>=<span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>保存后,然后尝试执行一下yum list 等操作,看看是否已经成功.</p>
<p>2、配置mta-postfix</p>
<p>安装postfix：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install</span> postfix</span><br><span class="line">yum <span class="keyword">remove</span> sendmail</span><br></pre></td></tr></table></figure>

<p>配置postfix：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">postconf -n &gt; <span class="regexp">/etc/</span>postfix/main2.cf</span><br><span class="line">mv <span class="regexp">/etc/</span>postfix<span class="regexp">/main.cf /</span>etc<span class="regexp">/postfix/m</span>ain.cf.old</span><br><span class="line">mv <span class="regexp">/etc/</span>postfix<span class="regexp">/main2.cf /</span>etc<span class="regexp">/postfix/m</span>ain.cf</span><br></pre></td></tr></table></figure>

<p>编辑main.cf:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi <span class="regexp">/etc/</span>postfix/main.cf</span><br></pre></td></tr></table></figure>

<p>增加如下内容:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hostname</span></span><br><span class="line"><span class="attr">mynetworks</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">myhostname</span> = mail.centos.bz</span><br><span class="line"><span class="attr">mydestination</span> = <span class="variable">$mynetworks</span> <span class="variable">$myhostname</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># banner</span></span><br><span class="line"><span class="attr">mail_name</span> = Postfix - by extmail.org</span><br><span class="line"><span class="attr">smtpd_banner</span> = <span class="variable">$myhostname</span> ESMTP <span class="variable">$mail_name</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># response immediately</span></span><br><span class="line"><span class="attr">smtpd_error_sleep_time</span> = <span class="number">0</span>s</span><br><span class="line"></span><br><span class="line"><span class="comment"># Message and return coolcode control</span></span><br><span class="line"><span class="attr">message_size_limit</span> = <span class="number">5242880</span></span><br><span class="line"><span class="attr">mailbox_size_limit</span> = <span class="number">5242880</span></span><br><span class="line"><span class="attr">show_user_unknown_table_name</span> = <span class="literal">no</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Queue lifetime control</span></span><br><span class="line"><span class="attr">bounce_queue_lifetime</span> = <span class="number">1</span>d</span><br><span class="line"><span class="attr">maximal_queue_lifetime</span> = <span class="number">1</span>d</span><br></pre></td></tr></table></figure>

<p>注:myhostname改为自己的.<br>设置postfix开机自启:</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">chkconfig</span> postfix <span class="literal">on</span></span><br></pre></td></tr></table></figure>

<p>3、配置courier-authlib</p>
<p>安装Courier-Authlib：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install</span> courier-authlib</span><br><span class="line">yum -y <span class="keyword">install</span> courier-authlib-mysql</span><br></pre></td></tr></table></figure>

<p>删除并编辑 <code>/etc/authlib/authmysqlrc</code>文件:</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat <span class="regexp">/dev/</span><span class="keyword">null</span> &gt;<span class="regexp">/etc/</span>authlib/authmysqlrc</span><br><span class="line">vi <span class="regexp">/etc/</span>authlib/authmysqlrc</span><br></pre></td></tr></table></figure>

<p>增加如下内容:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">MYSQL_SERVER            localhost</span><br><span class="line">MYSQL_USERNAME          extmail</span><br><span class="line">MYSQL_PASSWORD          extmail</span><br><span class="line">MYSQL_SOCKET            /var/lib/mysql/mysql.sock</span><br><span class="line">MYSQL_PORT              <span class="number">3306</span></span><br><span class="line">MYSQL_OPT               <span class="number">0</span></span><br><span class="line">MYSQL_DATABASE          extmail</span><br><span class="line">MYSQL_USER_TABLE        mailbox</span><br><span class="line">MYSQL_CRYPT_PWFIELD     <span class="keyword">password</span></span><br><span class="line">MYSQL_UID_FIELD         uidnumber</span><br><span class="line">MYSQL_GID_FIELD         gidnumber</span><br><span class="line">MYSQL_LOGIN_FIELD       username</span><br><span class="line">MYSQL_HOME_FIELD        homedir</span><br><span class="line">MYSQL_NAME_FIELD        <span class="type">name</span></span><br><span class="line">MYSQL_MAILDIR_FIELD     maildir</span><br><span class="line">MYSQL_QUOTA_FIELD       quota</span><br><span class="line">MYSQL_SELECT_CLAUSE     <span class="keyword">SELECT</span> username,<span class="keyword">password</span>,&quot;&quot;,uidnumber,gidnumber,</span><br><span class="line">                        CONCAT(<span class="string">&#x27;/home/domains/&#x27;</span>,homedir),</span><br><span class="line">                        CONCAT(<span class="string">&#x27;/home/domains/&#x27;</span>,maildir),</span><br><span class="line">                        quota,</span><br><span class="line">                        <span class="type">name</span></span><br><span class="line">                        <span class="keyword">FROM</span> mailbox</span><br><span class="line">                        <span class="keyword">WHERE</span> username = <span class="string">&#x27;$(local_part)@$(domain)&#x27;</span></span><br></pre></td></tr></table></figure>

<p>修改authdaemonrc文件：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi <span class="regexp">/etc/</span>authlib/authdaemonrc</span><br></pre></td></tr></table></figure>

<p>修改如下内容:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">authmodulelist</span>=<span class="string">&quot;authmysql&quot;</span></span><br><span class="line"><span class="attr">authmodulelistorig</span>=<span class="string">&quot;authmysql&quot;</span></span><br></pre></td></tr></table></figure>

<p>或者使用如下命令直接修改:</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -i &#x27;s/authmodulelist=.*<span class="string">/authmodulelist=</span><span class="string">&quot;authmysql&quot;</span><span class="string">/g</span>&#x27; <span class="string">/etc/authlib/authdaemonrc</span></span><br><span class="line">sed -i &#x27;s/authmodulelistorig=.*<span class="string">/authmodulelistorig=</span><span class="string">&quot;authmysql&quot;</span><span class="string">/g</span>&#x27; <span class="string">/etc/authlib/authdaemonrc</span></span><br></pre></td></tr></table></figure>

<p>启动courier-authlib:</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service courier-authlib <span class="literal">start</span></span><br></pre></td></tr></table></figure>

<p>修改authdaemon socket目录权限：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod <span class="number">755</span> <span class="regexp">/var/</span>spool<span class="regexp">/authdaemon/</span></span><br></pre></td></tr></table></figure>

<p>4、配置maildrop</p>
<p>安装maildrop：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install</span> maildrop</span><br></pre></td></tr></table></figure>

<p>配置master.cf 为了使Postfix支持Maildrop,必须修改/etc/postfix/master.cf文件,注释掉原来的maildrop的配置内容,并改为:</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">maildrop   unix        -       n        n        -        -        pipe</span><br><span class="line">  <span class="attribute">flags</span>=DRhu <span class="attribute">user</span>=vuser <span class="attribute">argv</span>=maildrop -w 90 -d <span class="variable">$&#123;user&#125;</span>@<span class="variable">$&#123;nexthop&#125;</span> <span class="variable">$&#123;recipient&#125;</span> <span class="variable">$&#123;user&#125;</span> <span class="variable">$&#123;extension&#125;</span> &#123;nexthop&#125;</span><br></pre></td></tr></table></figure>

<p>注意:flags前面有”两个空格”.</p>
<p>配置main.cf 由于maildrop不支持一次接收多个收件人,因此必须在main.cf里增加如下参数:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi <span class="regexp">/etc/</span>postfix/main.cf</span><br><span class="line">maildrop_destination_recipient_limit = <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>测试maildrop对authlib支持:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">maildrop -v</span></span><br></pre></td></tr></table></figure>

<p>看是否出现以下内容:</p>
<figure class="highlight mercury"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">maildrop <span class="number">2.1</span>.<span class="number">0</span> Copyright <span class="number">1998</span>-<span class="number">2005</span> Double Precision, Inc.</span><br><span class="line">GDBM/DB extensions enabled.</span><br><span class="line">Courier Authentication Library extension enabled.</span><br><span class="line">Maildir quota extension enabled.</span><br><span class="line">This program <span class="keyword">is</span> distributed under the terms of the GNU General Public</span><br><span class="line">License. See COPYING for additional information.</span><br></pre></td></tr></table></figure>

<p>5、配置apache</p>
<p>安装httpd:</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install</span> httpd</span><br></pre></td></tr></table></figure>

<p>虚拟主机设置:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi <span class="regexp">/etc/</span>httpd<span class="regexp">/conf/</span>httpd.conf</span><br></pre></td></tr></table></figure>

<p>在最后一行加上:</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NameVirtualHost *:80</span><br><span class="line"><span class="keyword">Include</span> <span class="keyword">conf</span>/vhost_*.<span class="keyword">conf</span></span><br></pre></td></tr></table></figure>

<p>编辑 vhost_extmail.conf:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi <span class="regexp">/etc/</span>httpd<span class="regexp">/conf/</span>vhost_extmail.conf</span><br></pre></td></tr></table></figure>

<p>里面定义虚拟主机的相关内容:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># VirtualHost for ExtMail Solution</span></span><br><span class="line">&lt;virtualHost *:<span class="number">80</span>&gt;</span><br><span class="line">ServerName mail.centos.bz</span><br><span class="line">DocumentRoot <span class="regexp">/var/</span>www<span class="regexp">/extsuite/</span>extmail<span class="regexp">/html/</span></span><br><span class="line"></span><br><span class="line">ScriptAlias <span class="regexp">/extmail/</span>cgi<span class="regexp">/ /</span>var<span class="regexp">/www/</span>extsuite<span class="regexp">/extmail/</span>cgi/</span><br><span class="line">Alias <span class="regexp">/extmail /</span>var<span class="regexp">/www/</span>extsuite<span class="regexp">/extmail/</span>html/</span><br><span class="line"></span><br><span class="line">ScriptAlias <span class="regexp">/extman/</span>cgi<span class="regexp">/ /</span>var<span class="regexp">/www/</span>extsuite<span class="regexp">/extman/</span>cgi/</span><br><span class="line">Alias <span class="regexp">/extman /</span>var<span class="regexp">/www/</span>extsuite<span class="regexp">/extman/</span>html/</span><br><span class="line"></span><br><span class="line"><span class="comment"># Suexec config</span></span><br><span class="line">SuexecUserGroup vuser vgroup</span><br><span class="line">&lt;/virtualHost&gt;</span><br></pre></td></tr></table></figure>

<p>注意:把ServerName修改成自己的.<br>设置apache开机启动并重启apache.</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">chkconfig</span> httpd <span class="literal">on</span></span><br><span class="line">service httpd restart</span><br></pre></td></tr></table></figure>

<p>6、配置webmail-extmail</p>
<p>安装ExtMail:</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install</span> extsuite-webmail</span><br></pre></td></tr></table></figure>

<p>编辑webmail.cf:</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> /var/www/extsuite/extmail</span><br><span class="line"><span class="keyword">cp</span> webmail.<span class="keyword">cf</span>.default webmail.<span class="keyword">cf</span></span><br><span class="line"><span class="keyword">vi</span> webmail.<span class="keyword">cf</span></span><br></pre></td></tr></table></figure>

<p>主要变动的内容见下:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">SYS_MYSQL_USER</span> = extmail</span><br><span class="line"><span class="attr">SYS_MYSQL_PASS</span> = extmail</span><br><span class="line"><span class="attr">SYS_MYSQL_DB</span> = extmail</span><br></pre></td></tr></table></figure>

<p>更新cgi目录权限 由于SuEXEC的需要,必须将extmail的cgi目录修改成vuser:vgroup权限:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R vuser:vgroup <span class="regexp">/var/</span>www<span class="regexp">/extsuite/</span>extmail<span class="regexp">/cgi/</span></span><br></pre></td></tr></table></figure>

<p>7、配置管理后台-extman</p>
<p>yum安装ExtMan:</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install</span> extsuite-webman</span><br></pre></td></tr></table></figure>

<p>更新cgi目录权限 由于SuEXEC的需要,必须将extman的cgi目录修改成vuser:vgroup权限:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R vuser:vgroup <span class="regexp">/var/</span>www<span class="regexp">/extsuite/</span>extman<span class="regexp">/cgi/</span></span><br></pre></td></tr></table></figure>

<p>链接基本库到Extmail:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir <span class="regexp">/tmp/</span>extman</span><br><span class="line">chown -R vuser:vgroup <span class="regexp">/tmp/</span>extman</span><br></pre></td></tr></table></figure>

<p>注意事项:</p>
<p>由于RedHat发行版中包含了一个叫tmpwatch的工具,该工具会定期扫描/tmp/下的文件,如果这些文件很久都没被使用,将被删除,因此如果后台长期不使用,/tmp/extman目录有可能被tmpwatch删除,所以要么定期登陆后台,要么修改 webman.cf将临时目录修改到另一个地方.此处暂以/tmp/extman默认值为例.</p>
<p>安装mysql数据库:</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install mysql mysql-<span class="keyword">server</span></span><br></pre></td></tr></table></figure>

<p>数据库初始化:</p>
<p>启动Mysql:</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service mysqld <span class="built_in">start</span></span><br><span class="line">chkconfig mysqld <span class="keyword">on</span></span><br></pre></td></tr></table></figure>

<p>导入mysql数据库结构及初始化数据,root密码默认为空.</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p &lt; <span class="regexp">/var/</span>www<span class="regexp">/extsuite/</span>extman<span class="regexp">/docs/</span>extmail.sql</span><br><span class="line">mysql -u root -p &lt; <span class="regexp">/var/</span>www<span class="regexp">/extsuite/</span>extman<span class="regexp">/docs/i</span>nit.sql</span><br></pre></td></tr></table></figure>

<p>注意事项:<br>上述导入初始化SQL时,默认的uidnumber/gidnumber都是1000,这和vuser:vgroup 的uid/gid一致,是因为maildrop投递时会从数据库里取uidnumber/gidnumber,而在master.cf里已经定义好了投递时的运行身份(vuser:vgroup),所以这两个字段的内容必须为1000,否则将出现投递错误,例如报0×06等错误.</p>
<p>设置虚拟域和虚拟用户的配置文件:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/var/</span>www<span class="regexp">/extsuite/</span>extman/docs</span><br><span class="line">cp mysql_virtual_alias_maps.cf <span class="regexp">/etc/</span>postfix/</span><br><span class="line">cp mysql_virtual_domains_maps.cf <span class="regexp">/etc/</span>postfix/</span><br><span class="line">cp mysql_virtual_mailbox_maps.cf <span class="regexp">/etc/</span>postfix/</span><br><span class="line">cp mysql_virtual_sender_maps.cf <span class="regexp">/etc/</span>postfix/</span><br></pre></td></tr></table></figure>

<p>配置main.cf:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi <span class="regexp">/etc/</span>postfix/main.cf</span><br></pre></td></tr></table></figure>

<p>增加以下内容:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># extmail config here</span></span><br><span class="line"><span class="attr">virtual_alias_maps</span> = mysql:/etc/postfix/mysql_virtual_alias_maps.cf</span><br><span class="line"><span class="attr">virtual_mailbox_domains</span> = mysql:/etc/postfix/mysql_virtual_domains_maps.cf</span><br><span class="line"><span class="attr">virtual_mailbox_maps</span> = mysql:/etc/postfix/mysql_virtual_mailbox_maps.cf</span><br><span class="line"><span class="attr">virtual_transport</span> = maildrop:</span><br></pre></td></tr></table></figure>

<p>重启postfix :</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service <span class="built_in">postfix</span> <span class="built_in">restart</span></span><br></pre></td></tr></table></figure>

<p>测试authlib:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>sbin/authtest -s login postmaster@extmail.org extmail</span><br></pre></td></tr></table></figure>

<p>结果如下:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Authentication succeeded.</span><br><span class="line"></span><br><span class="line">Authenticated: postmaster@extmail.org (uid <span class="number">1000</span>, gid <span class="number">1000</span>)</span><br><span class="line">Home Directory: /home/domains/extmail.org/postmaster</span><br><span class="line">Maildir: /home/domains/extmail.org/postmaster/Maildir/</span><br><span class="line">Quota: <span class="number">104857600</span>S</span><br><span class="line"><span class="keyword">Encrypted</span> <span class="keyword">Password</span>: <span class="meta">$1</span>$phz1mRrj$<span class="pgsql"><span class="number">3</span>ok6BjeaoJYWDBsEPZb5C0</span></span><br><span class="line"><span class="pgsql">Cleartext <span class="keyword">Password</span>: extmail</span></span><br><span class="line"><span class="pgsql"><span class="keyword">Options</span>: (<span class="keyword">none</span>)</span></span><br></pre></td></tr></table></figure>

<p>这样表明ExtMan的正确安装,数据库也正确导入,courier-authlib能正确连接到mysql数据库.</p>
<p>最后访问 <code>http://mail.centos.bz/extmail/</code>,如无意外,将看到webmail的登陆页,不过此时还没有加正式的用户,所以不能登陆,包括<a href="mailto:&#x70;&#111;&#115;&#116;&#109;&#x61;&#x73;&#116;&#x65;&#114;&#64;&#101;&#x78;&#116;&#109;&#97;&#105;&#x6c;&#x2e;&#x6f;&#114;&#x67;">&#x70;&#111;&#115;&#116;&#109;&#x61;&#x73;&#116;&#x65;&#114;&#64;&#101;&#x78;&#116;&#109;&#97;&#105;&#x6c;&#x2e;&#x6f;&#114;&#x67;</a>也不行.必须要登陆到 <code>http://mail.centos.bz/extman/</code> 里增加一个新帐户才能登陆.</p>
<p>ExtMan的默认超级管理员帐户:<a href="mailto:&#114;&#111;&#x6f;&#116;&#x40;&#101;&#x78;&#x74;&#x6d;&#97;&#x69;&#x6c;&#x2e;&#111;&#114;&#103;">&#114;&#111;&#x6f;&#116;&#x40;&#101;&#x78;&#x74;&#x6d;&#97;&#x69;&#x6c;&#x2e;&#111;&#114;&#103;</a>,初始密码:extmail<em>123</em>,登陆成功后,建议将密码修改,以确保安全.</p>
<p>配置图形化日志:</p>
<p>启动mailgraph_ext:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/mailgraph_ext/m</span>ailgraph-init start</span><br></pre></td></tr></table></figure>

<p>启动cmdserver(在后台显示系统信息):</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/var/</span>www<span class="regexp">/extsuite/</span>extman<span class="regexp">/daemon/</span>cmdserver --daemon</span><br></pre></td></tr></table></figure>

<p>加入开机自启动:</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo <span class="string">&quot;/usr/local/mailgraph_ext/mailgraph-init start&quot;</span> &gt;&gt; <span class="regexp">/etc/</span>rc.d/rc.local</span><br><span class="line">echo <span class="string">&quot;/var/www/extsuite/extman/daemon/cmdserver -v -d&quot;</span> &gt;&gt; <span class="regexp">/etc/</span>rc.d/rc.local</span><br></pre></td></tr></table></figure>

<p>使用方法: 等待大约15分钟左右,如果邮件系统有一定的流量,即可登陆到extman里,点”图形日志”即可看到图形化的日志.具体每天,周,月,年的则点击相应的图片进入即可.</p>
<p>8、配置cyrus-sasl</p>
<p>安装cyrus-sasl:</p>
<p>删除系统的cyrus-sasl:</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -e cyrus-sasl <span class="comment">--nodeps</span></span><br></pre></td></tr></table></figure>

<p>安装新的支持authdaemon的软件包:</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install</span> cyrus-sasl cyrus-sasl-plain</span><br></pre></td></tr></table></figure>

<p>配置main.cf文件:</p>
<p>Postfix的SMTP认证需要透过Cyrus-SASL,连接到authdaemon获取认证信息.</p>
<p>编辑main.cf:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi <span class="regexp">/etc/</span>postfix/main.cf</span><br></pre></td></tr></table></figure>

<p>增加如下内容:</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># smtpd related config</span></span><br><span class="line"><span class="attr">smtpd_recipient_restrictions</span> =<span class="string"></span></span><br><span class="line">        <span class="attr">permit_mynetworks,</span></span><br><span class="line">        <span class="attr">permit_sasl_authenticated,</span></span><br><span class="line">        <span class="attr">reject_non_fqdn_hostname,</span></span><br><span class="line">        <span class="attr">reject_non_fqdn_sender,</span></span><br><span class="line">        <span class="attr">reject_non_fqdn_recipient,</span></span><br><span class="line">        <span class="attr">reject_unauth_destination,</span></span><br><span class="line">        <span class="attr">reject_unauth_pipelining,</span></span><br><span class="line">        <span class="attr">reject_invalid_hostname,</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># SMTP sender login matching config</span></span><br><span class="line"><span class="attr">smtpd_sender_restrictions</span> =<span class="string"></span></span><br><span class="line">        <span class="attr">permit_mynetworks,</span></span><br><span class="line">        <span class="attr">reject_sender_login_mismatch,</span></span><br><span class="line">        <span class="attr">reject_authenticated_sender_login_mismatch,</span></span><br><span class="line">        <span class="attr">reject_unauthenticated_sender_login_mismatch</span></span><br><span class="line"></span><br><span class="line"><span class="attr">smtpd_sender_login_maps</span> =<span class="string"></span></span><br><span class="line">        <span class="attr">mysql</span>:<span class="string">/etc/postfix/mysql_virtual_sender_maps.cf,</span></span><br><span class="line">        <span class="attr">mysql</span>:<span class="string">/etc/postfix/mysql_virtual_alias_maps.cf</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># SMTP AUTH config here</span></span><br><span class="line"><span class="attr">broken_sasl_auth_clients</span> = <span class="string">yes</span></span><br><span class="line"><span class="attr">smtpd_sasl_auth_enable</span> = <span class="string">yes</span></span><br><span class="line"><span class="attr">smtpd_sasl_local_domain</span> = <span class="string">$myhostname</span></span><br><span class="line"><span class="attr">smtpd_sasl_security_options</span> = <span class="string">noanonymous</span></span><br></pre></td></tr></table></figure>

<p>编辑smtpd.conf文件:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi <span class="regexp">/usr/</span>lib<span class="regexp">/sasl2/</span>smtpd.conf</span><br></pre></td></tr></table></figure>

<p>确保其内容为:</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">pwcheck_method:</span> authdaemond</span><br><span class="line"><span class="symbol">log_level:</span> <span class="number">3</span></span><br><span class="line"><span class="symbol">mech_list:</span> PLAIN LOGIN</span><br><span class="line"><span class="symbol">authdaemond_path:</span><span class="meta-keyword">/var/</span>spool<span class="meta-keyword">/authdaemon/</span>socket</span><br></pre></td></tr></table></figure>

<p>重新启动postfix:</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service <span class="built_in">postfix</span> <span class="built_in">restart</span></span><br></pre></td></tr></table></figure>

<p>测试SMTP认证:</p>
<p>通过以下命令获得<a href="mailto:&#112;&#111;&#115;&#116;&#109;&#x61;&#115;&#x74;&#101;&#x72;&#64;&#x65;&#120;&#116;&#109;&#97;&#x69;&#x6c;&#x2e;&#x6f;&#x72;&#103;">&#112;&#111;&#115;&#116;&#109;&#x61;&#115;&#x74;&#101;&#x72;&#64;&#x65;&#120;&#116;&#109;&#97;&#x69;&#x6c;&#x2e;&#x6f;&#x72;&#103;</a>的用户名及密码的BASE64编码:</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">perl</span> -e &#x27;use MIME::Base<span class="number">64</span>; print encode_base<span class="number">64</span>(<span class="string">&quot;postmaster@extmail.org&quot;</span>)&#x27;</span><br></pre></td></tr></table></figure>

<p>内容如下:</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">c<span class="name">G9</span>zd<span class="name">G1</span>hc<span class="number">3</span>RlckBleHRtYWlsL<span class="name">m9</span>yZw==</span><br><span class="line"></span><br><span class="line">perl -e <span class="string">&#x27;use MIME::Base64; print encode_base64(&quot;extmail&quot;)&#x27;</span></span><br></pre></td></tr></table></figure>

<p>内容如下:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ZXh0bWFpbA</span>==</span><br></pre></td></tr></table></figure>

<p>然后本机测试:</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">telnet</span> localhost <span class="number">25</span></span><br></pre></td></tr></table></figure>

<p>其过程如下:</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Trying</span> <span class="number">127.0.0.1</span>…</span><br><span class="line"><span class="attribute">Connected</span> to localhost.localdomain (<span class="number">127.0.0.1</span>).</span><br><span class="line"><span class="attribute">Escape</span> character is &#x27;^]&#x27;.</span><br><span class="line"><span class="attribute">220</span> mail.extmail.org ESMTP Postfix – by extmail.org</span><br><span class="line"><span class="attribute">ehlo</span> demo.domain.tld &lt;&lt; 输入内容</span><br><span class="line"><span class="attribute">250</span>-mail.extmail.org</span><br><span class="line"><span class="attribute">250</span>-PIPELINING</span><br><span class="line"><span class="attribute">250</span>-SIZE <span class="number">10240000</span></span><br><span class="line"><span class="attribute">250</span>-VRFY</span><br><span class="line"><span class="attribute">250</span>-ETRN</span><br><span class="line"><span class="attribute">250</span>-AUTH LOGIN PLAIN</span><br><span class="line"><span class="attribute">250</span>-AUTH=LOGIN PLAIN</span><br><span class="line"><span class="attribute">250</span>-ENHANCEDSTATUScoolcodeS</span><br><span class="line"><span class="attribute">250</span>-<span class="number">8</span>BITMIME</span><br><span class="line"><span class="attribute">250</span> DSN</span><br><span class="line"><span class="attribute">auth</span> login &lt;&lt; 输入内容</span><br><span class="line"><span class="attribute">334</span> VXNlcm<span class="number">5</span>hbWU<span class="number">6</span></span><br><span class="line"><span class="attribute">cG9zdG1hc3RlckBleHRtYWlsLm9yZw</span>== &lt;&lt; 输入内容</span><br><span class="line"><span class="attribute">334</span> UGFzc<span class="number">3</span>dvcmQ<span class="number">6</span></span><br><span class="line"><span class="attribute">ZXh0bWFpbA</span>== &lt;&lt; 输入内容</span><br><span class="line"><span class="attribute">235</span> <span class="number">2</span>.<span class="number">0</span>.<span class="number">0</span> Authentication successful</span><br><span class="line"><span class="attribute">quit</span> &lt;&lt; 输入内容</span><br><span class="line"><span class="attribute">221</span> <span class="number">2</span>.<span class="number">0</span>.<span class="number">0</span> Bye</span><br></pre></td></tr></table></figure>

<p>最后出现235 Authentication Successful 表明认证成功了.</p>
<p>9、配置courier-imap</p>
<p>安装Courier-imap:</p>
<p>默认的courier-authlib及courier-imap都会增加系统自启动设置,因此下一次服务器启动将自动启动相应的authlib及POP3服务.</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install</span> courier-imap</span><br></pre></td></tr></table></figure>

<p>10、配置courier-imap</p>
<p>由于Courier-imap的IMAP目录是按UTF-7编码的,ExtMail目前还没有正式支持IMAP目录,因此需要屏蔽IMAP,只提供 pop3服务.而就目前的使用情况来看,IMAP使用的非常少,绝大部分OutLook/Foxmail用户都习惯使用POP3而非IMAP.<br>编辑文件:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi <span class="regexp">/usr/</span>lib<span class="regexp">/courier-imap/</span>etc/imapd</span><br></pre></td></tr></table></figure>

<p>修改内容如下:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">IMAPDSTART</span>=<span class="literal">NO</span></span><br></pre></td></tr></table></figure>

<p>编辑文件:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi <span class="regexp">/usr/</span>lib<span class="regexp">/courier-imap/</span>etc/imapd-ssl</span><br></pre></td></tr></table></figure>

<p>修改内容如下:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">IMAPDSSLSTART</span>=<span class="literal">NO</span></span><br></pre></td></tr></table></figure>

<p>然后重新启动courier-imap:</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service courier-imap <span class="literal">start</span></span><br></pre></td></tr></table></figure>

<p>测试POP3 请按如下步骤输入pop3命令测试其是否正常工作,注意蓝色的信息是我们输入到POP3服务器的(请首先登录extman自行建立<a href="mailto:&#x74;&#101;&#x73;&#116;&#64;&#x65;&#120;&#116;&#x6d;&#x61;&#105;&#108;&#46;&#111;&#114;&#103;">&#x74;&#101;&#x73;&#116;&#64;&#x65;&#120;&#116;&#x6d;&#x61;&#105;&#108;&#46;&#111;&#114;&#103;</a>用户,密码:extmail).</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">telnet</span> localhost <span class="number">110</span></span><br></pre></td></tr></table></figure>

<p>其过程如下:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Trying <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>…</span><br><span class="line">Connected <span class="keyword">to</span> localhost.localdomain (<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>).</span><br><span class="line"><span class="keyword">Escape</span> <span class="type">character</span> <span class="keyword">is</span> <span class="string">&#x27;^]&#x27;</span>.</span><br><span class="line">+OK Hello there.</span><br><span class="line"><span class="keyword">user</span> test@extmail.org &lt;&lt; 输入内容</span><br><span class="line">+OK <span class="keyword">Password</span> required.</span><br><span class="line">pass extmail &lt;&lt; 输入内容</span><br><span class="line">+OK <span class="keyword">logged</span> <span class="keyword">in</span>.</span><br><span class="line">list &lt;&lt; 输入内容</span><br><span class="line">+OK POP3 clients that break here, they violate STD53.</span><br><span class="line">.</span><br><span class="line">quit &lt;&lt; 输入内容</span><br><span class="line">+OK Bye-bye.</span><br><span class="line"><span class="keyword">Connection</span> closed <span class="keyword">by</span> <span class="keyword">foreign</span> host.</span><br></pre></td></tr></table></figure>

<p>11、最后说明</p>
<p>至此,ExtMail的安装配置基本完成,如想配置内容,病毒过滤请到官方网站学习配置.登录extmail系统后台后,请及时修改密码或者用户名.最后需要确认的是,是否已经设置好邮件域名的MX记录或者A记录,这样才能正常收取邮件.</p>
<p>域名解析实例:</p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">主机名  	网络  	优先级  	对应<span class="type">MAIL</span>主机名</span><br><span class="line">空	默认 	<span class="number">6</span> 	mail.dovao.com                           &lt;-<span class="comment">--mail解析</span></span><br><span class="line"></span><br><span class="line">主机名  	网络  	<span class="type">IP</span>地址</span><br><span class="line"><span class="title">mail</span>  	默认  	<span class="number">173.44</span><span class="number">.135</span><span class="number">.19</span>                            &lt;-<span class="comment">--A记录解析</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/32/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><span class="page-number current">33</span><a class="page-number" href="/page/34/">34</a><span class="space">&hellip;</span><a class="page-number" href="/page/132/">132</a><a class="extend next" rel="next" href="/page/34/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="王殊勋"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">王殊勋</p>
  <div class="site-description" itemprop="description">better late than never.<br>只要开始，虽晚不迟。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">656</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">2058</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <!--添加网站运行时间 -->
  <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
  <script>
      var now = new Date(); 
      function createtime() { 
          var grt= new Date("12/01/2007 12:00:00");//此处修改你的建站时间或者网站上线时间 
          now.setTime(now.getTime()+250); 
          days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
          hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
          if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
          mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
          seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
          snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
          document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "; 
          document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
      } 
  setInterval("createtime()",250);
  </script>
  <span itemprop="copyrightYear">(2007 - 2021)</span>
  <!-- 添加网站运行时间 -->
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">学无止境</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script size="300" alpha="0.6" zIndex="0" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
